# Specification Driven Development (SDD) 調査レポート

**調査日:** 2024年12月9日  
**調査目的:** SDDに関連する最新の記事や実践を調査し、ベストプラクティス、ツール比較、重要な機能・概念をまとめる

---

## 1. SDDの最新ベストプラクティス

### 1.1 コンテキスト・ファースト設計

現代のSDDでは、AIコーディングエージェントに対して**明確なコンテキスト**を提供することが最も重要視されています。

| プラクティス | 説明 |
|------------|------|
| **プロジェクトルール定義** | `.cursorrules`、`CLAUDE.md`、`steering/`のようなファイルでプロジェクト固有のルールを定義 |
| **コーディング規約の明文化** | スタイルガイド、命名規則、アーキテクチャパターンを文書化 |
| **依存関係の明示** | 使用ライブラリ、フレームワーク、バージョンを明確に指定 |
| **ディレクトリ構造の説明** | プロジェクト構造と各ディレクトリの役割を明確に |

### 1.2 段階的な仕様記述

```
高レベル仕様 → 詳細仕様 → 実装指示 → 検証基準
```

1. **ビジョン/目標**: 何を達成したいか
2. **機能要件**: 必要な機能のリスト
3. **技術仕様**: 具体的な実装方法
4. **受け入れ基準**: 完了条件とテスト

### 1.3 反復的な改善サイクル

- **仕様作成 → コード生成 → レビュー → 仕様更新**のサイクル
- AIの出力を検証し、仕様を継続的に改善
- 学習したパターンを`memories/`や`rules/`に蓄積

---

## 2. SDDツール・フレームワーク比較

### 2.1 主要ツール概要

| ツール | カテゴリ | 特徴 | Star数 |
|--------|----------|------|--------|
| **Cursor** | AI IDE | Rules for AI、コードベース理解、Agent機能 | N/A |
| **Claude Code** | ターミナルエージェント | MCP対応、Unix哲学、ファイル直接編集 | N/A |
| **Windsurf (Codeium)** | AI IDE | Cascade、フロー状態維持、深いコンテキスト認識 | N/A |
| **GPT Engineer** | コード生成プラットフォーム | 自然言語→コード、Lovable.devへ発展 | 55.1k |
| **Aider** | ターミナルペアプログラミング | Git統合、コーディング規約対応、マルチLLM | 大人気 |
| **Codegen** | コードエージェントOS | PR自動生成、チケット連携、MCP対応 | N/A |
| **Bolt.new** | Web Builder | チャットベース開発、デプロイ統合 | N/A |

### 2.2 詳細比較

#### Cursor

**主な機能:**
- `.cursorrules` ファイルによるAI挙動カスタマイズ
- コードベース埋め込みモデル（全体理解）
- Agentモード（自律的なコーディング）
- ルールとメモリ機能
- MCP（Model Context Protocol）サポート

**強み:**
- VS Code互換
- 直感的なUI
- コミュニティルール（awesome-cursorrules: 36k stars）

#### Claude Code

**主な機能:**
- ターミナルネイティブ
- 直接ファイル編集・コマンド実行
- MCP連携（Google Drive、Jira、Slack等）
- スクリプタブル（パイプライン対応）
- エンタープライズ対応

**強み:**
- Unix哲学に忠実
- 既存ワークフローへの統合が容易
- CI/CD連携

#### Windsurf (Cascade)

**主な機能:**
- Cascade: 深いコードベース理解
- フロー状態維持設計
- Supercomplete（次のアクション予測）
- Tab to Jump（カーソル位置予測）
- MCP対応

**強み:**
- 94%のコードがAI生成
- Fortune 500企業の59%が使用
- Linter自動修正

#### Aider

**主な機能:**
- Git統合（自動コミット）
- マルチLLMサポート
- `.aider.conf.yml` による設定
- `/architect` コマンド
- コーディング規約指定

**強み:**
- オープンソース
- 柔軟なモデル選択
- 詳細なドキュメント

#### GPT Engineer → Lovable.dev

**主な機能:**
- 自然言語でのソフトウェア仕様記述
- `prompt` ファイルによる指示
- `preprompts` によるAIアイデンティティ設定
- ビジョン対応（画像入力）
- ベンチマーク機能

**発展:**
- Lovable.dev: チャットでアプリ構築
- Bolt.new: StackBlitz提供のWebビルダー

---

## 3. SDDで重要視されている機能・概念

### 3.1 コンテキスト管理

```
┌─────────────────────────────────────────────────────────┐
│                   Context Hierarchy                      │
├─────────────────────────────────────────────────────────┤
│  Global Rules     │ 組織全体のコーディング規約           │
│  Project Rules    │ プロジェクト固有の設定               │
│  File Rules       │ ファイルタイプ別の指示               │
│  Task Context     │ 現在のタスクに関する情報             │
│  Conversation     │ 対話履歴                             │
└─────────────────────────────────────────────────────────┘
```

### 3.2 主要概念リスト

| 概念 | 説明 | 実装例 |
|------|------|--------|
| **Rules/Specifications** | AIの振る舞いを定義する設定 | `.cursorrules`, `CLAUDE.md`, `steering/` |
| **Memory** | 学習した情報の永続化 | `memories/`, プロジェクトナレッジ |
| **Context Window** | 利用可能なコンテキストサイズ | モデル依存（128K-200K tokens） |
| **Repository Map** | コードベースの構造マップ | Aider repomap |
| **Codebase Embedding** | コードのベクトル表現 | Cursor、Windsurf |
| **Agent Mode** | 自律的なタスク実行 | Cursor Agent、Claude Code |
| **MCP (Model Context Protocol)** | 外部ツール連携プロトコル | 全主要ツールが対応 |
| **Pre-prompts** | AIのアイデンティティ設定 | GPT Engineer |
| **Checkpoints** | 作業状態の保存・復元 | musubi checkpoint |

### 3.3 品質保証機能

- **Linter統合**: エラー自動検出・修正
- **テスト生成**: 仕様からのテスト自動生成
- **コードレビュー**: AIによるレビュー（Bugbot等）
- **リファクタリング**: 自動リファクタリング提案

---

## 4. AIコーディングエージェントとの統合パターン

### 4.1 統合アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                    User Interface Layer                      │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │   IDE   │  │ Terminal│  │   Web   │  │  Slack  │        │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘        │
└───────┼────────────┼────────────┼────────────┼──────────────┘
        │            │            │            │
        ▼            ▼            ▼            ▼
┌─────────────────────────────────────────────────────────────┐
│                   Context Layer                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │   Rules     │  │   Memory    │  │  Codebase   │          │
│  │   Engine    │  │   Store     │  │  Index      │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
└────────────────────────────┬────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────┐
│                   Agent Layer                                │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │   Planner   │  │   Executor  │  │   Reviewer  │          │
│  │             │◄─┤             │◄─┤             │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
└────────────────────────────┬────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────┐
│                   LLM Layer                                  │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │ Claude  │  │  GPT    │  │ Gemini  │  │ Custom  │        │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 統合パターン一覧

#### パターン1: IDE統合
```
Developer ←→ AI IDE (Cursor/Windsurf) ←→ LLM
                    ↓
              Codebase Context
```
- **ユースケース**: 日常的なコーディング
- **例**: Cursor, Windsurf, GitHub Copilot

#### パターン2: ターミナル統合
```
Developer ←→ Terminal Agent (Claude Code/Aider) ←→ LLM
                    ↓
              Git Repository
```
- **ユースケース**: コマンドライン好み、スクリプト連携
- **例**: Claude Code, Aider

#### パターン3: チケット/PR統合
```
Issue Tracker ←→ Code Agent (Codegen) ←→ LLM
                    ↓
              Pull Request
```
- **ユースケース**: 自動化されたタスク処理
- **例**: Codegen, Sweep

#### パターン4: MCP統合
```
                 ┌─── Figma
Developer ←→ MCP Server ←→ LLM
                 ├─── Slack
                 ├─── Jira
                 └─── Custom Tools
```
- **ユースケース**: 複数ツール連携
- **例**: 全主要プラットフォームがMCP対応

### 4.3 musubi-sddとの統合

musubiプロジェクトは以下のSDD機能を実装:

| 機能 | 対応コマンド | 説明 |
|------|-------------|------|
| 仕様管理 | `musubi-requirements` | 要件定義の管理 |
| 設計管理 | `musubi-design` | 設計ドキュメント生成 |
| コード解析 | `musubi-analyze` | コードベース分析 |
| ギャップ分析 | `musubi-gaps` | 仕様と実装の差分検出 |
| 変更追跡 | `musubi-change` | 変更履歴の管理 |
| チェックポイント | `musubi-checkpoint` | 状態の保存・復元 |
| メモリ | `musubi-remember` | 学習情報の永続化 |
| ステアリング | `steering/` | AI挙動の制御 |

---

## 5. 現在のトレンドと新しいアプローチ

### 5.1 2024-2025年のトレンド

1. **Agentic Coding（自律型コーディング）**
   - 単純な補完から自律的なタスク実行へ
   - 計画→実行→検証のループ

2. **MCP（Model Context Protocol）の普及**
   - Anthropic主導の標準化
   - 外部ツール連携の統一インターフェース

3. **コンテキストウィンドウの拡大**
   - 128K → 200K tokens
   - より多くのコードベースを一度に理解

4. **マルチモーダル対応**
   - 画像（UI設計）からのコード生成
   - 音声入力対応

5. **エンタープライズ対応**
   - SOC 2コンプライアンス
   - オンプレミスデプロイ
   - SSO統合

### 5.2 新しいアプローチ

#### フロー状態維持設計（Windsurf）
```
開発者の思考フロー
    ↓
AI が先回りして予測
    ↓
シームレスな補完・提案
    ↓
中断なく開発継続
```

#### 仕様駆動型ワークフロー（musubi SDD）
```
ステアリングファイル
    ↓
自動仕様生成
    ↓
ギャップ分析
    ↓
コード生成
    ↓
検証・フィードバック
```

#### チームナレッジ統合
- プロジェクト固有の知識を蓄積
- チーム間での知識共有
- コードレビューからの学習

---

## 6. 推奨事項（musubiプロジェクトへの提案）

### 6.1 短期的改善

1. **MCPサポートの強化**
   - 主要ツール（Figma, Jira, Slack）との連携
   - カスタムMCPサーバーのテンプレート提供

2. **ルール形式の標準化**
   - `.cursorrules` との互換性
   - `CLAUDE.md` 形式のサポート

3. **コンテキスト管理の改善**
   - より効率的なコードベースインデックス
   - 選択的なコンテキスト提供

### 6.2 中長期的な方向性

1. **Agentic機能の強化**
   - 計画→実行→検証の自動化
   - マルチエージェント協調

2. **学習機能の拡張**
   - プロジェクトからの自動学習
   - ベストプラクティスの蓄積

3. **エンタープライズ機能**
   - チーム間でのルール共有
   - 監査ログ
   - コンプライアンス対応

---

## 7. 参考リソース

### 公式ドキュメント
- [Claude Code Docs](https://code.claude.com/docs/en/overview)
- [Cursor Features](https://cursor.com/features)
- [Aider Documentation](https://aider.chat/docs/)
- [Windsurf](https://windsurf.com/)

### コミュニティリソース
- [awesome-cursorrules](https://github.com/PatrickJS/awesome-cursorrules) - 36k stars
- [GPT Engineer](https://github.com/AntonOsika/gpt-engineer) - 55.1k stars

### 記事・ブログ
- [Claude's Character - Anthropic Research](https://www.anthropic.com/research/claude-character)
- [Lovable.dev Blog](https://lovable.dev/blog)
- [Codegen Blog](https://codegen.com/blog)

---

*このレポートは2024年12月時点の情報に基づいています。AI開発ツールの分野は急速に進化しているため、最新情報は各公式サイトを参照してください。*
